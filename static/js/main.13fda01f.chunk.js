(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{235:function(e,t,a){},322:function(e,t,a){e.exports=a(638)},45:function(e,t,a){e.exports={primary:"#f44336",secondary:"#cddc39"}},631:function(e,t,a){e.exports={primary:"#f44336",secondary:"#cddc39"}},633:function(e,t,a){},636:function(e,t,a){},638:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}var c=a(30),s=a.n(c),m=(a(334),a(336),a(18)),u=a(26),d=a(20),h=a(19),p=a(21),E=a(641),f=a(643),v=a(642),b=a(640),g=a(23),C=a(639),O=a(6),j=a(96),y=a.n(j),S=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){s.a.auth().signOut()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return console.log(),r.a.createElement("div",{className:"navbar"},r.a.createElement(O.a,{position:"static"},r.a.createElement(O.j,null,r.a.createElement(O.f,null,r.a.createElement(y.a,null," menu ")),r.a.createElement(C.a,{className:"element",to:"/db"},"myReactapp v1"),r.a.createElement(C.a,{className:"btn",to:"/db"},r.a.createElement(O.b,{onClick:this.logout}," Log Out ")))))}}]),t}(n.Component),w=a(238),N=a(99),k=a(38),M=a(100),x=a.n(M),T=a(37),W=a(158),I=a.n(W),D=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.mapPropsToState=function(){a.setState({delbtn:a.props.delbtn,ready:a.props.ready,delete:a.props.delete,start:a.props.event.start,end:a.props.event.end,title:a.props.event.title})},a.handleTitleChange=function(e){a.setState(Object(T.a)({},e.target.id,e.target.value))},a.handleTimeChange=function(e,t){var n=e.getMinutes(),r=e.getHours(),l=new Date(a.state[t]);l.setHours(r),l.setMinutes(n),a.setState(Object(T.a)({},t,l))},a.handleSubmit=function(e){e.preventDefault(),a.setState({open:!1,ready:!0},function(){a.props.onClose(a.state)})},a.handleDelete=function(){a.setState({open:!1,delete:!0},function(){a.props.onClose(a.state)})},a.handleClose=function(){a.setState({open:!1},function(){a.props.onClose(a.state)})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(O.i,{open:this.props.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",onRendered:this.mapPropsToState},r.a.createElement("div",{className:"eventModal"},r.a.createElement("div",{className:"header"},r.a.createElement("h3",{id:"form-dialog-title"}," ",this.props.title," "),this.state.delbtn?r.a.createElement(O.f,{onClick:this.handleDelete},r.a.createElement("i",{className:"material-icons"},"delete")):r.a.createElement("div",null)),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(O.e,{className:"titleinput",margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.h,{htmlFor:"title"},"Event title"),r.a.createElement(O.g,{id:"title",name:"title",autoComplete:"title",autoFocus:!0,onChange:this.handleTitleChange,value:this.state.title})),r.a.createElement("div",{className:"pickers"},r.a.createElement("span",null,"Start time"),r.a.createElement("span",null,"End time"),r.a.createElement(I.a,{className:"timepicker",value:this.state.start,onChange:function(t){return e.handleTimeChange(t,"start")}}),r.a.createElement(I.a,{className:"timepicker",value:this.state.end,onChange:function(t){return e.handleTimeChange(t,"end")}})),r.a.createElement(O.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},this.props.textbtn," "))))}}]),t}(r.a.Component),F=a(157),A=a.n(F),P=(a(622),a(623),a(237)),q=a.n(P),G=x.a.momentLocalizer(A.a),B=q()(x.a),L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).readEventsfromGCal=function(){s.a.functions().httpsCallable("readEvents")({maxResults:250}).then(function(e){var t=[];e.data.map(function(e){var a=new Date(e.start.dateTime),n=new Date(e.end.dateTime);return t.push({title:e.summary,meta:e,start:a,end:n,id:e.id}),t}),a.setState({events:t},function(){return console.log(a.state.events)})})},a.openCreateModal=function(e){a.setState({openCreate:!0,actualEvent:{start:e.start,end:e.end,title:""}})},a.createEvent=function(e){if(a.setState({openCreate:!1}),e.ready){var t=e.start.toISOString(),n=e.end.toISOString();s.a.functions().httpsCallable("addEventToCalendar")({eventName:e.title,startTime:t,endTime:n}).then(function(t){t&&(console.log("Se creo el evento "+e.title),a.readEventsfromGCal())})}},a.openEditModal=function(e){a.setState({openEdit:!0,actualEvent:e})},a.closeEditModal=function(e){a.setState({openEdit:!1}),(e.ready||e.delete)&&(e.delete?a.deleteEvent({event:a.state.actualEvent}):a.editEvent({event:a.state.actualEvent,start:e.start,end:e.end}))},a.editEvent=function(e){var t=e.event,n=e.start,r=e.end,l=a.state.events,o=l.indexOf(t),i=Object(N.a)({},t,{start:n,end:r}),c=Object(w.a)(l);c.splice(o,1,i),a.setState({events:c});var m=i.start.toISOString(),u=i.end.toISOString();i=Object(N.a)({},t,{start:m,end:u}),s.a.functions().httpsCallable("updateEvent")(Object(N.a)({},i)).then(function(e){e&&(console.log("Se edito el evento "+t.title),a.readEventsfromGCal())})},a.deleteEvent=function(e){var t=e.event;s.a.functions().httpsCallable("deleteEventFromCalendar")({eventId:t.id}).then(function(e){console.log("Se elimino el evento "+t.title),a.readEventsfromGCal()})},a.render=function(){return r.a.createElement("div",null,r.a.createElement(B,{selectable:!0,localizer:G,events:a.state.events,onEventDrop:a.editEvent,onSelectSlot:a.openCreateModal,onSelectEvent:a.openEditModal,defaultView:x.a.Views.WEEK,step:15,timeslots:4,min:new Date("2019, 1, 1, 08:00"),max:new Date("2019, 1, 1, 20:00"),style:{height:"100vh"}}),a.state.actualEvent?r.a.createElement("div",null,r.a.createElement(D,{title:"New Event",textbtn:"Create",ready:!1,delete:!1,delbtn:!1,open:a.state.openCreate,event:a.state.actualEvent,onClose:a.createEvent}),r.a.createElement(D,{title:"Edit Event",textbtn:"Edit",ready:!1,delete:!1,delbtn:!0,open:a.state.openEdit,event:a.state.actualEvent,onClose:a.closeEditModal})):null)},a.state={events:[],openCreate:!1,openEdit:!1,actualEvent:null},a.editEvent=a.editEvent.bind(Object(k.a)(Object(k.a)(a))),a.openCreateModal=a.openCreateModal.bind(Object(k.a)(Object(k.a)(a))),a.openEditModal=a.openEditModal.bind(Object(k.a)(Object(k.a)(a))),a.readEventsfromGCal(),setInterval(a.readEventsfromGCal,36e5),a}return Object(p.a)(t,e),t}(n.Component),R=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"calendar"},r.a.createElement(L,null)))}}]),t}(n.Component),z=function(e){return r.a.createElement("div",{className:"userprofile"},r.a.createElement("h2",null,"User with id: ",e.match.params.id),r.a.createElement(C.a,{to:"/"}," ",r.a.createElement(O.b,null," Go back to Dashboard ")," "))},U=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement(E.a,{basename:"/react-gcal"},r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/",render:function(){return r.a.createElement(b.a,{to:"/db"})}}),r.a.createElement(v.a,{path:"/db",component:R}),r.a.createElement(v.a,{path:"/user/:id",component:z}),r.a.createElement(v.a,{path:"*",render:function(){return r.a.createElement(b.a,{to:"/db"})}}))))}}]),t}(n.Component),V=a(45),J=a.n(V),H=(a(631),a(633),a(235),a(636),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(g.MuiThemeProvider,{theme:K},r.a.createElement(E.a,{basename:"/react-gcal"},r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/",component:U}),r.a.createElement(v.a,{path:"*",render:function(){return r.a.createElement(b.a,{to:"/"})}}))))}}]),t}(n.Component)),K=Object(g.createMuiTheme)({palette:{primary:{main:J.a.primary},secondary:{main:J.a.secondary}},typography:{useNextVariants:!0}}),X=H,Y=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",authError:null},a.handleChange=function(e){a.setState(Object(T.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),s.a.auth().signInWithEmailAndPassword(a.state.email,a.state.password).then(function(){a.setState({authError:null})}).catch(function(e){a.setState({authError:e.message})})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signin"},r.a.createElement(O.c,{className:"card"},r.a.createElement(O.d,{title:"Sign In",className:"cardheader"}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(O.e,{className:"emailinput",margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.h,{htmlFor:"email"},"Email Address"),r.a.createElement(O.g,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:this.handleChange})),r.a.createElement(O.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.h,{htmlFor:"password"},"Password"),r.a.createElement(O.g,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handleChange})),this.state.authError?r.a.createElement("p",{className:"errormsg"},this.state.authError):null,r.a.createElement(O.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign in"),r.a.createElement(C.a,{className:"linkto",to:"/signup"},"Sign up"))))}}]),t}(n.Component),$=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:"",authError:null},a.handleChange=function(e){a.setState(Object(T.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),s.a.auth().createUserWithEmailAndPassword(a.state.email,a.state.password).then(function(){a.setState({authError:null})}).catch(function(e){a.setState({authError:e.message})})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signup"},r.a.createElement(O.c,{className:"card"},r.a.createElement(O.d,{title:"Sign Up",className:"cardheader"}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(O.e,{className:"emailinput",margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.h,{htmlFor:"email"},"Email Address"),r.a.createElement(O.g,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:this.handleChange})),r.a.createElement(O.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.h,{htmlFor:"password"},"Password"),r.a.createElement(O.g,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handleChange})),r.a.createElement(O.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.h,{htmlFor:"firstName"},"First Name"),r.a.createElement(O.g,{id:"firstName",name:"firstName",autoComplete:"firstName",onChange:this.handleChange})),r.a.createElement(O.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(O.h,{htmlFor:"lastName"},"Last Name"),r.a.createElement(O.g,{id:"lastName",name:"lastName",autoComplete:"lastName",onChange:this.handleChange})),this.state.authError?r.a.createElement("p",{className:"errormsg"},this.state.authError):null,r.a.createElement(O.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign up"),r.a.createElement(C.a,{className:"linkto",to:"/signin"},"Sign in"))))}}]),t}(n.Component),_=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(g.MuiThemeProvider,{theme:Q},r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/signin",component:Y}),r.a.createElement(v.a,{exact:!0,path:"/signup",component:$}),r.a.createElement(v.a,{path:"*",render:function(){return r.a.createElement(b.a,{to:"/signin"})}}))))}}]),t}(n.Component),Q=Object(g.createMuiTheme)({palette:{primary:{main:J.a.primary},secondary:{main:J.a.secondary}},typography:{useNextVariants:!0}}),Z=_;s.a.initializeApp({apiKey:"AIzaSyBLgnrnoI1i_XF1O5xdSf3nnXRYEJ83krk",authDomain:"authreact-tuto.firebaseapp.com",databaseURL:"https://authreact-tuto.firebaseio.com",projectId:"authreact-tuto",storageBucket:"authreact-tuto.appspot.com",messagingSenderId:"942976975988"}).auth().onAuthStateChanged(function(e){e?(o.a.render(r.a.createElement(X,null),document.getElementById("root")),i()):(o.a.render(r.a.createElement(Z,null),document.getElementById("root")),i())})}},[[322,2,1]]]);
//# sourceMappingURL=main.13fda01f.chunk.js.map