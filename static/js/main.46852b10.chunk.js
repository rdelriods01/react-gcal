(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{321:function(e,t,a){e.exports=a(638)},630:function(e,t,a){e.exports={primary:"#f44336",secondary:"#cddc39"}},632:function(e,t,a){},634:function(e,t,a){},636:function(e,t,a){},638:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),o=a.n(l),i=a(96),c=a.n(i),s=a(18),m=a(25),u=a(20),d=a(19),h=a(21),p=a(29),E=a(641),f=a(643),v=a(642),b=a(640),g=a(30),C=a.n(g),O=(a(334),a(336),a(639)),j=a(6),S=a(95),y=a.n(S),w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){C.a.auth().signOut()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return console.log(),r.a.createElement("div",{className:"navbar"},r.a.createElement(j.a,{position:"static"},r.a.createElement(j.j,null,r.a.createElement(j.f,null,r.a.createElement(y.a,null," menu ")),r.a.createElement(O.a,{className:"element",to:"/db"},"myReactapp"),r.a.createElement(O.a,{className:"btn",to:"/db"},r.a.createElement(j.b,{onClick:this.logout}," Log Out ")))))}}]),t}(n.Component),N=a(237),k=a(99),M=a(38),x=a(100),W=a.n(x),D=a(37),T=a(158),F=a.n(T),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={title:""},a.mapPropsToState=function(){a.setState({delbtn:a.props.delbtn,ready:a.props.ready,delete:a.props.delete,start:a.props.event.start,end:a.props.event.end,title:a.props.event.title})},a.handleTitleChange=function(e){a.setState(Object(D.a)({},e.target.id,e.target.value))},a.handleTimeChange=function(e,t){var n=e.getMinutes(),r=e.getHours(),l=new Date(a.state[t]);l.setHours(r),l.setMinutes(n),a.setState(Object(D.a)({},t,l))},a.handleSubmit=function(e){e.preventDefault(),a.setState({open:!1,ready:!0},function(){a.props.onClose(a.state)})},a.handleDelete=function(){a.setState({open:!1,delete:!0},function(){a.props.onClose(a.state)})},a.handleClose=function(){a.setState({open:!1},function(){a.props.onClose(a.state)})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(j.i,{open:this.props.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",onRendered:this.mapPropsToState},r.a.createElement("div",{className:"eventModal"},r.a.createElement("div",{className:"header"},r.a.createElement("h3",{id:"form-dialog-title"}," ",this.props.title," "),this.state.delbtn?r.a.createElement(j.f,{onClick:this.handleDelete},r.a.createElement("i",{className:"material-icons"},"delete")):r.a.createElement("div",null)),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(j.e,{className:"titleinput",margin:"normal",required:!0,fullWidth:!0},r.a.createElement(j.h,{htmlFor:"title"},"Event title"),r.a.createElement(j.g,{id:"title",name:"title",autoComplete:"title",autoFocus:!0,onChange:this.handleTitleChange,value:this.state.title})),r.a.createElement("div",{className:"pickers"},r.a.createElement("span",null,"Start time"),r.a.createElement("span",null,"End time"),r.a.createElement(F.a,{className:"timepicker",value:this.state.start,onChange:function(t){return e.handleTimeChange(t,"start")}}),r.a.createElement(F.a,{className:"timepicker",value:this.state.end,onChange:function(t){return e.handleTimeChange(t,"end")}})),r.a.createElement(j.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},this.props.textbtn," "))))}}]),t}(r.a.Component),A=a(157),q=a.n(A),G=(a(622),a(623),a(236)),P=a.n(G),L=W.a.momentLocalizer(q.a),R=P()(W.a),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).readEventsfromGCal=function(){C.a.functions().httpsCallable("readEvents")({maxResults:250}).then(function(e){var t=[];e.data.map(function(e){var a=new Date(e.start.dateTime),n=new Date(e.end.dateTime);return t.push({title:e.summary,meta:e,start:a,end:n,id:e.id}),t}),a.setState({events:t},function(){return console.log(a.state.events)})})},a.openCreateModal=function(e){a.setState({openCreate:!0,actualEvent:{start:e.start,end:e.end,title:""}})},a.createEvent=function(e){if(a.setState({openCreate:!1}),e.ready){var t=e.start.toISOString(),n=e.end.toISOString();C.a.functions().httpsCallable("addEventToCalendar")({eventName:e.title,startTime:t,endTime:n}).then(function(t){t&&(console.log("Se creo el evento "+e.title),a.readEventsfromGCal())})}},a.openEditModal=function(e){a.setState({openEdit:!0,actualEvent:e})},a.closeEditModal=function(e){a.setState({openEdit:!1}),(e.ready||e.delete)&&(e.delete?a.deleteEvent({event:a.state.actualEvent}):a.editEvent({event:a.state.actualEvent,start:e.start,end:e.end}))},a.editEvent=function(e){var t=e.event,n=e.start,r=e.end,l=a.state.events,o=l.indexOf(t),i=Object(k.a)({},t,{start:n,end:r}),c=Object(N.a)(l);c.splice(o,1,i),a.setState({events:c});var s=i.start.toISOString(),m=i.end.toISOString();i=Object(k.a)({},t,{start:s,end:m}),C.a.functions().httpsCallable("updateEvent")(Object(k.a)({},i)).then(function(e){e&&(console.log("Se edito el evento "+t.title),a.readEventsfromGCal())})},a.deleteEvent=function(e){var t=e.event;C.a.functions().httpsCallable("deleteEventFromCalendar")({eventId:t.id}).then(function(e){console.log("Se elimino el evento "+t.title),a.readEventsfromGCal()})},a.render=function(){return r.a.createElement("div",null,r.a.createElement(R,{selectable:!0,localizer:L,events:a.state.events,onEventDrop:a.editEvent,onSelectSlot:a.openCreateModal,onSelectEvent:a.openEditModal,defaultView:W.a.Views.WEEK,step:15,timeslots:4,min:new Date("2019, 1, 1, 08:00"),max:new Date("2019, 1, 1, 20:00"),style:{height:"100vh"}}),a.state.actualEvent?r.a.createElement("div",null,r.a.createElement(I,{title:"New Event",textbtn:"Create",ready:!1,delete:!1,delbtn:!1,open:a.state.openCreate,event:a.state.actualEvent,onClose:a.createEvent}),r.a.createElement(I,{title:"Edit Event",textbtn:"Edit",ready:!1,delete:!1,delbtn:!0,open:a.state.openEdit,event:a.state.actualEvent,onClose:a.closeEditModal})):null)},a.state={events:[],openCreate:!1,openEdit:!1,actualEvent:null},a.editEvent=a.editEvent.bind(Object(M.a)(Object(M.a)(a))),a.openCreateModal=a.openCreateModal.bind(Object(M.a)(Object(M.a)(a))),a.openEditModal=a.openEditModal.bind(Object(M.a)(Object(M.a)(a))),a.readEventsfromGCal(),setInterval(a.readEventsfromGCal,36e5),a}return Object(h.a)(t,e),t}(n.Component),B=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"calendar"},r.a.createElement(z,null)))}}]),t}(n.Component),U=function(e){return r.a.createElement("div",{className:"userprofile"},r.a.createElement("h2",null,"User with id: ",e.match.params.id),r.a.createElement(O.a,{to:"/"}," ",r.a.createElement(j.b,null," Go back to Dashboard ")," "))},J=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:"",authError:null},a.handleChange=function(e){a.setState(Object(D.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),C.a.auth().createUserWithEmailAndPassword(a.state.email,a.state.password).then(function(){a.setState({authError:null})}).catch(function(e){a.setState({authError:e.message})})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signup"},r.a.createElement(j.c,{className:"card"},r.a.createElement(j.d,{title:"Sign Up",className:"cardheader"}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(j.e,{className:"emailinput",margin:"normal",required:!0,fullWidth:!0},r.a.createElement(j.h,{htmlFor:"email"},"Email Address"),r.a.createElement(j.g,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:this.handleChange})),r.a.createElement(j.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(j.h,{htmlFor:"password"},"Password"),r.a.createElement(j.g,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handleChange})),r.a.createElement(j.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(j.h,{htmlFor:"firstName"},"First Name"),r.a.createElement(j.g,{id:"firstName",name:"firstName",autoComplete:"firstName",onChange:this.handleChange})),r.a.createElement(j.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(j.h,{htmlFor:"lastName"},"Last Name"),r.a.createElement(j.g,{id:"lastName",name:"lastName",autoComplete:"lastName",onChange:this.handleChange})),this.state.authError?r.a.createElement("p",{className:"errormsg"},this.state.authError):null,r.a.createElement(j.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign up"),r.a.createElement(O.a,{className:"linkto",to:"/signin"},"Sign in"))))}}]),t}(n.Component),V=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement(E.a,{basename:"/gcal"},r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/",render:function(){return r.a.createElement(b.a,{to:"/db"})}}),r.a.createElement(v.a,{path:"/db",component:B}),r.a.createElement(v.a,{path:"/signup",component:J}),r.a.createElement(v.a,{path:"/user/:id",component:U}),r.a.createElement(v.a,{path:"*",render:function(){return r.a.createElement(b.a,{to:"/db"})}}))))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",authError:null},a.handleChange=function(e){a.setState(Object(D.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),C.a.auth().signInWithEmailAndPassword(a.state.email,a.state.password).then(function(){a.setState({authError:null})}).catch(function(e){a.setState({authError:e.message})})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signin"},r.a.createElement(j.c,{className:"card"},r.a.createElement(j.d,{title:"Sign In",className:"cardheader"}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(j.e,{className:"emailinput",margin:"normal",required:!0,fullWidth:!0},r.a.createElement(j.h,{htmlFor:"email"},"Email Address"),r.a.createElement(j.g,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:this.handleChange})),r.a.createElement(j.e,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(j.h,{htmlFor:"password"},"Password"),r.a.createElement(j.g,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handleChange})),this.state.authError?r.a.createElement("p",{className:"errormsg"},this.state.authError):null,r.a.createElement(j.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign in"),r.a.createElement(O.a,{className:"linkto",to:"/signup"},"Sign up"))))}}]),t}(n.Component),K=C.a.initializeApp({apiKey:"AIzaSyBLgnrnoI1i_XF1O5xdSf3nnXRYEJ83krk",authDomain:"authreact-tuto.firebaseapp.com",databaseURL:"https://authreact-tuto.firebaseio.com",projectId:"authreact-tuto",storageBucket:"authreact-tuto.appspot.com",messagingSenderId:"942976975988"}),X=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={user:null},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;K.auth().onAuthStateChanged(function(t){e.setState({user:t})})}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement("div",{className:"main"},r.a.createElement(E.a,{basename:"/gcal"},e?r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/",component:V}),r.a.createElement(v.a,{path:"*",render:function(){return r.a.createElement(b.a,{to:"/"})}})):r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/signin",component:H}),r.a.createElement(v.a,{exact:!0,path:"/signup",component:J}),r.a.createElement(v.a,{path:"*",render:function(){return r.a.createElement(b.a,{to:"/signin"})}}))))}}]),t}(n.Component),Y=(a(630),a(632),a(634),a(636),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(p.MuiThemeProvider,{theme:$},r.a.createElement(X,null))}}]),t}(n.Component)),$=Object(p.createMuiTheme)({palette:{primary:{main:c.a.primary},secondary:{main:c.a.secondary}},typography:{useNextVariants:!0}}),_=Y;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,a){e.exports={primary:"#f44336",secondary:"#cddc39"}}},[[321,2,1]]]);
//# sourceMappingURL=main.46852b10.chunk.js.map